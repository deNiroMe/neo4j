<!DOCTYPE html>
<html lang="en"
	layout:decorator="layouts/main">
<head>
<title>profile</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" th:href="@{/css/w3.css}" type='text/css'>
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-blue-grey.css" th:href="@{/css/w3-theme-blue-grey.css}" type='text/css'>
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" >
<link rel="stylesheet"  th:href="@{/css/bootstrap.min.css}" type='text/css'>
<link rel="stylesheet"  th:href="@{/css/profile.css}" type='text/css'>
<style type="text/css">
.bg-gray {color:#696969;}
.shadow1 {  background-color: #fff;  /*box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);*/
margin-bottom:15px;}
img {width:100%}
.car-details li {
    border-right: 1px solid #eeeeee;
    margin: 0 !important;
    padding: 0 10px;
    font-size:18px;
}
.car-details li small {
    display: block;
    line-height: 1;
    font-size: 14px;
}
.car-details li {
    font-size: 16px;
}
.car-details li .fa {
    color: #5783b0;
    float: left;
    font-size: 18px;
    margin: 10px 10px 20px 0;
}
.checked {
    color: orange;
}

.testimonials .carousel-info img {
    border: 1px solid #f5f5f5;
    border-radius: 150px !important;
    height: 75px;
    padding: 3px;
    width: 75px;
}

.testimonials span.testimonials-name {
    color: #e6400c;
    font-size: 16px;
    font-weight: 300;
    margin: 23px 0 7px;
}
.testimonials span.testimonials-post {
    color: #656565;
    font-size: 12px;
}
</style>

<body class="w3-theme-l5">

<!-- Navbar -->
<div class="w3-top">
 <div class="w3-bar w3-theme-d2 w3-left-align w3-large">
  
  <a href="/logout" class="w3-bar-item w3-button w3-hide-small w3-right w3-padding-large w3-hover-white" >
    <!--  img src="/w3images/avatar2.png" class="w3-circle" style="height:23px;width:23px" alt="Avatar" -->
    Logout
  </a>
  
  <a href="/profile" class="w3-bar-item w3-button w3-hide-small w3-right w3-padding-large w3-hover-white" >
    Add New
  </a>
  <a href="/profile2" class="w3-bar-item w3-button w3-hide-small w3-right w3-padding-large w3-hover-white" >
    <!--  img src="/w3images/avatar2.png" class="w3-circle" style="height:23px;width:23px" alt="Avatar" -->
    View List
  </a>
  <a href="/products" class="w3-bar-item w3-button w3-hide-small w3-right w3-padding-large w3-hover-white" >
    <!--  img src="/w3images/avatar2.png" class="w3-circle" style="height:23px;width:23px" alt="Avatar" -->
    Products
  </a>
  
 </div>
</div>

<!-- Page Container -->
<div class="w3-container w3-content" style="max-width:1400px;margin-top:80px">    
  <!-- The Grid -->
  <div class="w3-row">
    
    <!-- Middle Column -->
	<div class="w3-col m8" id="list_products">
		
	</div>
	
	<div class="w3-col m4" id="list_users">
		<div class="row">
			<h4 style="text-align: center;">People who also recommend this product </h4>
		</div>
		<div class="row" id="users">
	        
	       
   		</div>
		
	</div>
	
    <!-- End Grid -->
  </div>
  
<!-- End Page Container -->
</div>
<br>

<!-- Footer -->
<footer class="w3-container w3-theme-d5">
  <h5>Footer</h5>
</footer>

<script type="text/javascript" src="js/jquery-3.3.1.min.js"></script> 
<script>

(function () {
	
	var products = [];
// 		[ { 
// 					   "name" : "Motocycle - Scrambler 125 EEC Retro motorcycle 180cc",
// 					   "catecory" : "motocycles",
// 					   "price" : "$1,300",
// 					   "photo" : 1 
// 					  },
// 					  { 
// 					 	"name" : "Wood Hard Case Bamboo+PC Phone Case Accesoriesfor Iphone 6 plus",
// 						"catecory" : "accessories",
// 						"price" : "$4,3",
// 						   "photo" : 2
// 					  },
// 					  { 
// 						"name" : "Original in stock Asus Zenfone 2 ZE551ML 4GB RAM 32GB ROM",
// 						"catecory" : "phones",
// 						"price" : "$4,3",
// 						   "photo" : 3
// 					   },
// 					   { 
// 						   "name" : "INTEX Mariner 3 Fishing Type 3 person Inflatable Raft River/Lake Dinghy Boat For Fishing",
// 						   "catecory" : "Boats",
// 						   "price" : "$1,000",
// 						   "photo" : 4
// 						  },
// 						  { 
// 						 	"name" : "Hot light carbon fiber 18 speed road bike",
// 							"catecory" : "Bikkes",
// 							"price" : "$799",
// 							   "photo" : 5
// 						  },
// 						  { 
// 							"name" : "Business Water Resistant Polyester Laptop Backpack with USB Charging",
// 							"catecory" : "Bags",
// 							"price" : "$1,8",
// 							   "photo" : 6
// 						   },
// 						   { 
// 							   "name" : "Xiaomi Mi Laptop Notebook Air i5 13.3 8GB DDR4 RAM 256GB SSD",
// 							   "catecory" : "Laptops",
// 							   "price" : "$654,50" ,
// 							   "photo" : 7
// 							  },
							  
// 							  { 
// 								"name" : "Acura TLX Base 4dr Front-wheel Drive Sedan",
// 								"catecory" : "Cars",
// 								"price" : "$4000,00",
// 								   "photo" : 8
// 							   }
// 	];
	
	$.get( "/ajax/products", function( data ) {
		products = data;
		function getRandomInt(min,max) {
			return Math.floor(Math.random() * (max - min + 1)) + min;
		}
	var html = '';
	$.each( products, function( i, value ){		
		
		 html += ` 
		   
			 <div class="container bg-gray ">
				<div class="row">
				   <div class="col-md-9 shadow1">
			            <div class="col-md-3">
			                <div class="list-car-img">
			                    <img class="img-responsive" style="width:60%" src="img/${value.photo}.png" >
			                </div>
			            </div>
			            <div class="col-md-8">
			                <div class="list-car-title clearfix">
			                    <h4>${value.name}</h4>
			                    <hr>
			                </div>
			                <div class="car-details" style="padding-bottom: 0px;margin-top: -19px;">
			                  <ul class="list-inline" >
			                    <li><i class="fa fa-list" style="margin-top: 4px;"></i>Category<span> : ${value.category}</span></li>
			                    <li><i class="fa fa-money" style="margin-top: 4px;"></i>Price <span> : ${value.price}</span></li>
			                  </ul>    
			    
			            </div>
			               
			                <div class="car-bottom" style="margin-top: -10px;">
			                    <ul class="list-inline pull-right">
			                        <li><a href="#">Recommend this product</a></li>
			                        <li style="cursor : pointer">
			                        	<span id="starts_1_${value.photo}" class="fa fa-star "></span>
										<span id="starts_2_${value.photo}" class="fa fa-star "></span>
										<span id="starts_3_${value.photo}" class="fa fa-star "></span>
										<span id="starts_4_${value.photo}" class="fa fa-star"></span>
										<span id="starts_5_${value.photo}" class="fa fa-star"></span>
			                        </li>
			                    </ul>
			                </div>
			            </div>
			        </div>
			    </div>
			</div>
		 
		`;
		 
	});
		$("#list_products").append(html);		
	
		$.each( products, function( i, value ){	
			for(let i = 1; i <= 5; i++){
				$("#starts_"+i+"_"+value.photo).click(function(){
					for(let j = 1; j <= 5; j++){
						if(j<=i)
							$("#starts_"+j+"_"+value.photo).addClass("checked");
						else
							$("#starts_"+j+"_"+value.photo).removeClass("checked");
					}
					$.get( "/ajax/add-recommendation?product="+value.name+"&starts="+i, function( data ) {
						var html = '';
						$.each( data, function( i, value ){								
							if( value.user.gender === 'M' )
								avatar = getRandomInt(1,3);
							else
								avatar = getRandomInt(4,5);							
							 html += `
								 <div class="col-md-4">
						            <div class="testimonials">
						            	<div class="active item">
						                   <div class="carousel-info pull-left">
						                    <img alt="" src="img/avatar${avatar}.png" class="pull-left">
						                    <div class="pull-left">
						                      <span class="testimonials-name" style="text-align:center;">${value.user.name}</span><br>
						                      <span class="testimonials-post" style="text-align:center;">${value.user.job}</span>
						                    </div>
						                  </div>
						                </div>
						            </div>
						        </div>
							 `;
						});
						$("#users").empty();
						$("#users").append(html);
					});
				});
			}			
		});
	
	});
	
})();
</script>

</body>
</html> 
